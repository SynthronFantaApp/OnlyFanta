<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OnlyFanta ‚Äì Assistente Asta Fantacalcio</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- HERO SECTION -->
  <header class="hero">
    <img src="logo.png" alt="OnlyFanta Logo" class="logo" />
    <h1>OnlyFanta</h1>
    <h2>Il tuo assistente intelligente per l‚Äôasta del fantacalcio</h2>
    <a href="#prova" class="cta">Prova Gratis</a>
  </header>

  <!-- COME FUNZIONA -->
  <section class="how-it-works">
    <h3>Come funziona</h3>
    <div class="steps">
      <div>
        <span>1Ô∏è‚É£</span>
        <p>Carica o scegli il tuo listone</p>
      </div>
      <div>
        <span>2Ô∏è‚É£</span>
        <p>Analizza i dati avanzati dei giocatori</p>
      </div>
      <div>
        <span>3Ô∏è‚É£</span>
        <p>Fai l‚Äôasta simulata o assistita in tempo reale</p>
      </div>
    </div>
  </section>

  <!-- FEATURES -->
  <section class="features">
    <h3>Funzionalit√† Chiave</h3>
    <ul>
      <li>üìä Statistiche dettagliate per ogni giocatore</li>
      <li>üîÑ Confronto annate (2023/24)</li>
      <li>ü§ñ Suggerimenti in tempo reale durante l‚Äôasta</li>
      <li>üí∞ Gestione crediti e monitoraggio squadre avversarie</li>
      <li>üî• Heatmap e dati avanzati</li>
      <li>üéØ Suggerimenti sui migliori acquisti in base alla strategia scelta</li>
    </ul>
  </section>
<section class="tabella-giocatori">
  <h3>Giocatori</h3>
  <div id="tabella-container">
    <p>Caricamento dati...</p>
  </div>
  <div id="scheda-giocatore" style="display:none; margin-top:30px; background:#f6f6fa; border-radius:10px; padding:18px;"></div>
</section>

<style>
#tabella-container table {
  width: 100%;
  border-collapse: collapse;
  font-size: 1.08em;
  margin-top: 12px;
  background: #fff;
}
#tabella-container th, #tabella-container td {
  border: 1px solid #bbb;
  padding: 7px 10px;
  text-align: left;
}
#tabella-container tr:hover {
  background: #eaf2fb;
  cursor: pointer;
}
#scheda-giocatore {
  display:none;
  margin-top:30px;
  background:#f6f6fa;
  border-radius:10px;
  padding:18px;
  box-shadow: 0 2px 10px #ccc2;
  max-width: 700px;
}
</style>

<section class="tabella-giocatori">
  <h3>Giocatori ‚Äì Listone Ufficiale</h3>
  <div id="tabella-container">
    <p>Caricamento dati...</p>
  </div>
  <div id="scheda-giocatore"></div>
</section>

<script>
fetch('giocatori.json')
  .then(response => response.json())
  .then(data => {
    // Solo giocatori del listone!
    const filtrati = data.filter(g => g.in_listone === true);

    const colonne = [
      { chiave: "nome", label: "Nome" },
      { chiave: "squadra", label: "Squadra" },
      { chiave: "ruoloClassic", label: "Ruolo Classic" },
      { chiave: "ruoloMantra", label: "Ruolo Mantra" },
      { chiave: "prezzo", label: "Prezzo" }
    ];

    let html = '<table><thead><tr>';
    colonne.forEach(col => {
      html += `<th>${col.label}</th>`;
    });
    html += '</tr></thead><tbody>';

    filtrati.forEach((giocatore, idx) => {
      html += `<tr onclick="mostraScheda(${idx})">`;
      colonne.forEach(col => {
        html += `<td>${giocatore[col.chiave] || ""}</td>`;
      });
      html += '</tr>';
    });

    html += '</tbody></table>';
    document.getElementById('tabella-container').innerHTML = html;

    window.__giocatori_filtrati = filtrati;
    window.mostraScheda = function(idx) {
      const giocatore = window.__giocatori_filtrati[idx];
      let html = `<h4>${giocatore.nome} ‚Äì ${giocatore.squadra}</h4>`;

      // Info base
      html += '<table style="border-collapse:collapse;margin-bottom:18px">';
      ["ruoloClassic", "ruoloMantra", "prezzo"].forEach(key => {
        html += `<tr><td style="border:1px solid #bbb;padding:5px;">${key}</td>
        <td style="border:1px solid #bbb;padding:5px;">${giocatore[key] || ""}</td></tr>`;
      });
      html += '</table>';

      // Se ha dati annate
      if (giocatore.dati_2024 || giocatore.dati_2023) {
        html += "<h5>Statistiche</h5>";
        html += "<table style='border-collapse:collapse;'>";
        if (giocatore.dati_2024) {
          html += "<tr><td colspan='2' style='background:#f3f7ff; font-weight:bold;'>Stagione 2024</td></tr>";
          for (let k in giocatore.dati_2024) {
            html += `<tr><td style="border:1px solid #bbb;padding:5px;">${k}</td>
            <td style="border:1px solid #bbb;padding:5px;">${giocatore.dati_2024[k]}</td></tr>`;
          }
        }
        if (giocatore.dati_2023) {
          html += "<tr><td colspan='2' style='background:#f7f3ff; font-weight:bold;'>Stagione 2023</td></tr>";
          for (let k in giocatore.dati_2023) {
            html += `<tr><td style="border:1px solid #bbb;padding:5px;">${k}</td>
            <td style="border:1px solid #bbb;padding:5px;">${giocatore.dati_2023[k]}</td></tr>`;
          }
        }
        html += "</table>";
      }
      html += `<button onclick="document.getElementById('scheda-giocatore').style.display='none';" style="margin-top:18px;">Chiudi scheda</button>`;
      const box = document.getElementById('scheda-giocatore');
      box.innerHTML = html;
      box.style.display = 'block';
      window.scrollTo({ top: box.offsetTop - 60, behavior: "smooth" });
    }
  })
  .catch(error => {
    document.getElementById('tabella-container').innerHTML = '<p>Errore nel caricamento dati.</p>';
    console.error(error);
  });
</script>

  <!-- DEMO / PREVIEW -->
  <section class="demo">
    <h3>Demo Interattiva</h3>
    <img src="demo.jpg" alt="Demo app" style="max-width:400px;">
    <p>(Qui puoi mettere uno screen, una GIF, o un video demo)</p>
  </section>

  <!-- CTA / REGISTRAZIONE -->
  <section class="cta-area" id="prova">
    <h3>Vuoi provare OnlyFanta?</h3>
    <a href="https://forms.gle/tuoform" class="cta">Registrati Gratis</a>
    <p>(Sostituisci il link con il tuo Google Form o quello che vuoi tu)</p>
  </section>

  <!-- FAQ -->
  <section class="faq">
    <h3>FAQ</h3>
    <details>
      <summary>Funziona con tutti i listoni?</summary>
      <p>S√¨, puoi caricare qualsiasi listone CSV/Excel/Google Sheet.</p>
    </details>
    <details>
      <summary>Serve inserire dati a mano?</summary>
      <p>No, puoi importare direttamente le statistiche da N8N o usare quelle gi√† pronte.</p>
    </details>
    <details>
      <summary>Posso usarlo anche per il Mantra?</summary>
      <p>Certo! L‚Äôapp √® ottimizzata sia per Classic che per Mantra.</p>
    </details>
  </section>

  <!-- FOOTER -->
  <footer>
    <p>¬© 2025 OnlyFanta ‚Äì <a href="mailto:info@onlyfanta.it">Contatti</a> ‚Äì <a href="#">Privacy Policy</a></p>
  </footer>
</body>
</html>
