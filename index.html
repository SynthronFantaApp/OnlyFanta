<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OnlyFanta ‚Äì Assistente Asta Fantacalcio</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- HERO SECTION -->
  <header class="hero">
    <img src="logo.png" alt="OnlyFanta Logo" class="logo" />
    <h1>OnlyFanta</h1>
    <h2>Il tuo assistente intelligente per l‚Äôasta del fantacalcio</h2>
    <a href="#prova" class="cta">Prova Gratis</a>
  </header>

  <!-- COME FUNZIONA -->
  <section class="how-it-works">
    <h3>Come funziona</h3>
    <div class="steps">
      <div>
        <span>1Ô∏è‚É£</span>
        <p>Carica o scegli il tuo listone</p>
      </div>
      <div>
        <span>2Ô∏è‚É£</span>
        <p>Analizza i dati avanzati dei giocatori</p>
      </div>
      <div>
        <span>3Ô∏è‚É£</span>
        <p>Fai l‚Äôasta simulata o assistita in tempo reale</p>
      </div>
    </div>
  </section>

  <!-- FEATURES -->
  <section class="features">
    <h3>Funzionalit√† Chiave</h3>
    <ul>
      <li>üìä Statistiche dettagliate per ogni giocatore</li>
      <li>üîÑ Confronto annate (2023/24)</li>
      <li>ü§ñ Suggerimenti in tempo reale durante l‚Äôasta</li>
      <li>üí∞ Gestione crediti e monitoraggio squadre avversarie</li>
      <li>üî• Heatmap e dati avanzati</li>
      <li>üéØ Suggerimenti sui migliori acquisti in base alla strategia scelta</li>
    </ul>
  </section>
<section class="tabella-giocatori">
  <h3>Giocatori</h3>
  <div id="tabella-container">
    <p>Caricamento dati...</p>
  </div>
  <div id="scheda-giocatore" style="display:none; margin-top:30px; background:#f6f6fa; border-radius:10px; padding:18px;"></div>
</section>

<style>
#tabella-container table {
  width: 100%;
  border-collapse: collapse;
  font-size: 1.08em;
  margin-top: 12px;
  background: #fff;
}
#tabella-container th, #tabella-container td {
  border: 1px solid #bbb;
  padding: 7px 10px;
  text-align: left;
}
#tabella-container tr:hover {
  background: #eaf2fb;
  cursor: pointer;
}
#scheda-giocatore {
  display:none;
  margin-top:30px;
  background:#f6f6fa;
  border-radius:10px;
  padding:18px;
  box-shadow: 0 2px 10px #ccc2;
  max-width: 700px;
}
</style>

<section class="tabella-giocatori">
  <h3>Giocatori ‚Äì Listone Ufficiale</h3>
  <div id="tabella-container">
    <p>Caricamento dati...</p>
  </div>
  <div id="scheda-giocatore"></div>
</section>

<script>
fetch('giocatori.json')
  .then(response => response.json())<style>
#tabella-cerca-container {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  margin-bottom: 8px;
}
#cerca-giocatore {
  padding: 6px 11px;
  border: 1px solid #bbb;
  border-radius: 8px;
  margin-left: 8px;
  font-size: 1em;
  width: 180px;
}
#tabella-container table {
  width: 100%;
  border-collapse: collapse;
  font-size: 1.06em;
  background: #fff;
}
#tabella-container th, #tabella-container td {
  border: 1px solid #bbb;
  padding: 7px 10px;
  text-align: left;
}
#tabella-container tr:hover {
  background: #eaf2fb;
  cursor: pointer;
}
</style>

<div id="tabella-cerca-container">
  <label for="cerca-giocatore" style="font-weight:bold;">Cerca giocatore:</label>
  <input type="text" id="cerca-giocatore" placeholder="Cerca per cognome...">
</div>
<div id="tabella-container">
  <p>Caricamento dati...</p>
</div>

<script>
let giocatoriFiltrati = [];
let giocatoriOrig = [];
let campoCognome = "nome"; // Cambia qui se il campo √® "cognome" puro

fetch('giocatori.json')
  .then(response => response.json())
  .then(data => {
    // Filtro solo quelli col campo in_listone === true
    giocatoriOrig = data.filter(g => g.in_listone === true);
    giocatoriFiltrati = giocatoriOrig;
    renderTabella(giocatoriOrig);

    document.getElementById('cerca-giocatore').addEventListener('input', function() {
      const search = this.value.trim().toLowerCase();
      if (search.length === 0) {
        giocatoriFiltrati = giocatoriOrig;
      } else {
        giocatoriFiltrati = giocatoriOrig.filter(g =>
          (g[campoCognome] || "").toLowerCase().includes(search)
        );
      }
      renderTabella(giocatoriFiltrati);
    });
  });

function renderTabella(lista) {
  let html = '<table><thead><tr><th>Cognome</th><th>Squadra</th><th>Ruolo Classic</th><th>Ruolo Mantra</th><th>Prezzo</th></tr></thead><tbody>';
  lista.forEach((g, idx) => {
    html += `<tr data-idx="${idx}"><td>${g.nome || ""}</td><td>${g.squadra || ""}</td><td>${g.ruoloClassic || ""}</td><td>${g.ruoloMantra || ""}</td><td>${g.prezzo || ""}</td></tr>`;
  });
  html += '</tbody></table>';
  document.getElementById('tabella-container').innerHTML = html;

  // Click per dettaglio
  document.querySelectorAll('#tabella-container tbody tr').forEach(row => {
    row.addEventListener('click', function() {
      const idx = this.getAttribute('data-idx');
      // Passo alla pagina giocatore l'idx relativo alla lista filtrata!
      window.location.href = `giocatore.html?id=${idx}`;
    });
  });

  // Ricorda la lista filtrata per dettaglio
  window.__giocatori_filtrati = lista;
}
</script>

</script>

  <!-- DEMO / PREVIEW -->
  <section class="demo">
    <h3>Demo Interattiva</h3>
    <img src="demo.jpg" alt="Demo app" style="max-width:400px;">
    <p>(Qui puoi mettere uno screen, una GIF, o un video demo)</p>
  </section>

  <!-- CTA / REGISTRAZIONE -->
  <section class="cta-area" id="prova">
    <h3>Vuoi provare OnlyFanta?</h3>
    <a href="https://forms.gle/tuoform" class="cta">Registrati Gratis</a>
    <p>(Sostituisci il link con il tuo Google Form o quello che vuoi tu)</p>
  </section>

  <!-- FAQ -->
  <section class="faq">
    <h3>FAQ</h3>
    <details>
      <summary>Funziona con tutti i listoni?</summary>
      <p>S√¨, puoi caricare qualsiasi listone CSV/Excel/Google Sheet.</p>
    </details>
    <details>
      <summary>Serve inserire dati a mano?</summary>
      <p>No, puoi importare direttamente le statistiche da N8N o usare quelle gi√† pronte.</p>
    </details>
    <details>
      <summary>Posso usarlo anche per il Mantra?</summary>
      <p>Certo! L‚Äôapp √® ottimizzata sia per Classic che per Mantra.</p>
    </details>
  </section>

  <!-- FOOTER -->
  <footer>
    <p>¬© 2025 OnlyFanta ‚Äì <a href="mailto:info@onlyfanta.it">Contatti</a> ‚Äì <a href="#">Privacy Policy</a></p>
  </footer>
</body>
</html>
