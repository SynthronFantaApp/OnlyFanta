<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OnlyFanta ‚Äì Assistente Asta Fantacalcio</title>
  <link rel="stylesheet" href="style.css">
  <!-- Libreria PDF.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
</head>
<body>
  <!-- HERO SECTION -->
  <header class="hero">
    <img src="logo.png" alt="OnlyFanta Logo" class="logo" />
    <h1>OnlyFanta</h1>
    <h2>Il tuo assistente intelligente per l‚Äôasta del fantacalcio</h2>
    <a href="#prova" class="cta">Prova Gratis</a>
  </header>

  <!-- COME FUNZIONA -->
  <section class="how-it-works">
    <h3>Come funziona</h3>
    <div class="steps">
      <div>
        <span>1Ô∏è‚É£</span>
        <p>
          <label for="uploadListone" style="cursor:pointer;">Carica o scegli il tuo listone</label>
          <input type="file" id="uploadListone" accept=".pdf" style="display:none;">
        </p>
      </div>
      <div>
        <span>2Ô∏è‚É£</span>
        <p>Analizza i dati avanzati dei giocatori</p>
      </div>
      <div>
        <span>3Ô∏è‚É£</span>
        <p>Fai l‚Äôasta simulata o assistita in tempo reale</p>
      </div>
    </div>
  </section>

  <!-- FEATURES -->
  <section class="features">
    <h3>Funzionalit√† Chiave</h3>
    <ul>
      <li>üìä Statistiche dettagliate per ogni giocatore</li>
      <li>üîÑ Confronto annate (2023/24, 2024/25)</li>
      <li>ü§ñ Suggerimenti in tempo reale durante l‚Äôasta</li>
      <li>üí∞ Gestione crediti e monitoraggio squadre avversarie</li>
      <li>üî• Heatmap e dati avanzati</li>
      <li>üéØ Suggerimenti sui migliori acquisti in base alla strategia scelta</li>
    </ul>
  </section>

  <!-- PREVIEW DEL LISTONE -->
  <section>
    <h3>Anteprima Listone (prime 10 righe)</h3>
    <div id="anteprima-listone" style="background:#f6f6fa;padding:14px;border-radius:8px;margin-bottom:20px;overflow:auto;"></div>
    <button id="visualizza-tutto" style="display:none;margin-bottom:24px;">Visualizza tutto</button>
  </section>

  <!-- DEMO / PREVIEW -->
  <section class="demo">
    <h3>Demo Interattiva</h3>
    <img src="demo.jpg" alt="Demo app" style="max-width:400px;">
    <p>(Qui puoi mettere uno screen, una GIF, o un video demo)</p>
  </section>

  <!-- CTA / REGISTRAZIONE -->
  <section class="cta-area" id="prova">
    <h3>Vuoi provare OnlyFanta?</h3>
    <a href="https://forms.gle/tuoform" class="cta">Registrati Gratis</a>
    <p>(Sostituisci il link con il tuo Google Form o quello che vuoi tu)</p>
  </section>

  <!-- FAQ -->
  <section class="faq">
    <h3>FAQ</h3>
    <details>
      <summary>Funziona con tutti i listoni?</summary>
      <p>S√¨, puoi caricare qualsiasi listone PDF (o CSV/Excel/Google Sheet in futuro).</p>
    </details>
    <details>
      <summary>Serve inserire dati a mano?</summary>
      <p>No, puoi importare direttamente le statistiche o usare quelle gi√† pronte.</p>
    </details>
    <details>
      <summary>Posso usarlo anche per il Mantra?</summary>
      <p>Certo! L‚Äôapp √® ottimizzata sia per Classic che per Mantra.</p>
    </details>
  </section>

  <!-- FOOTER -->
  <footer>
    <p>¬© 2025 OnlyFanta ‚Äì <a href="mailto:info@onlyfanta.it">Contatti</a> ‚Äì <a href="#">Privacy Policy</a></p>
  </footer>

  <!-- SCRIPT PDF PARSING -->
  <script>
    document.getElementById('uploadListone').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(evt) {
        const typedarray = new Uint8Array(evt.target.result);
        pdfjsLib.getDocument({data: typedarray}).promise.then(function(pdf) {
          let pagesPromises = [];
          for (let i = 1; i <= pdf.numPages; i++) {
            pagesPromises.push(pdf.getPage(i).then(page =>
              page.getTextContent().then(textContent => 
                textContent.items.map(item => item.str).join(' ')
              )
            ));
          }
          Promise.all(pagesPromises).then(function(pagesText) {
            // Unisci tutto il testo (pi√π pagine)
            const tutto = pagesText.join('\n');
            const righe = tutto.split('\n').filter(r => r.trim().length > 0);
            // Visualizza solo le prime 10 righe
            let preview = '<pre style="white-space:pre-wrap;">' + righe.slice(0,10).join('\n') + '</pre>';
            document.getElementById('anteprima-listone').innerHTML = preview;
            // Mostra bottone visualizza tutto se ci sono pi√π di 10 righe
            if(righe.length > 10){
              document.getElementById('visualizza-tutto').style.display = 'inline-block';
              document.getElementById('visualizza-tutto').onclick = function(){
                document.getElementById('anteprima-listone').innerHTML = '<pre style="white-space:pre-wrap;">' + righe.join('\n') + '</pre>';
                this.style.display = 'none';
              };
            }
          });
        });
      };
      reader.readAsArrayBuffer(file);
    });
    // Quando clicchi sull‚Äôicona 1Ô∏è‚É£ apri la selezione file
    document.querySelector('.how-it-works .steps div:first-child p label').onclick = function() {
      document.getElementById('uploadListone').click();
    }
  </script>
</body>
</html>
